
---
title: getchar的返回值是int而不是char
date: 2020-06-14 18:00:00
categories: C语言
tags:
- C陷阱与缺陷
- getchar
---

首先考虑下面的例子：
```C
char c; 
while ((c = getchar()) != EOF)
{
    putchar(c);　　　
}
```
getchar函数在一般情况下返回的是标准输入文件中的下一个字符，当没有输入时返回EOF（EOF 定义为 -1）。

程序中的变量c被声明为char类型，而不是int类型。这意味着c无法容下所有可能的字符，特别是，可能无法容下EOF。

因此，最终结果存在两种可能。一种可能是，某些合法的输入字符在被“截断”后使得c的取值与EOF相同；另一种可能是，c根本不可能取到EOF这个值。
对于前一种情况，程序将在文件复制的中途终止；对于后一种情况，程序将陷入一个死循环。
实际上，还有可能存在第三种情况：程序表面上似乎能够正常工作，但完全是因为巧合。

**所以，应该使用 int 型变量接收 getchar 的返回值。**